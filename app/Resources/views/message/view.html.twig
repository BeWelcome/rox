{% extends 'base.html.twig' %}

{% set directionIn = my_member.id == message.receiver.id %}
{% set otherMember = directionIn ? message.sender : message.receiver %}

{% block title %}
    {{ 'Messages with %s' | trans | format(otherMember.Username) }}
{% endblock %}

{% block content %}

    <div class="d-flex flex-row justify-content-between">
        <a class="btn btn-primary" href="{{ path( 'message_reply', { id: message.id } ) }}">{{ 'Reply' | trans }}</a>
        <a class="btn btn-secondary m-0 allmessages" href="messages/with/{{ otherMember.Username }}">
            <i class="fa fa-envelope-o"></i>
            {{ 'All messages with' | trans }} {{ otherMember.Username }}
        </a>
    </div>

<div class="d-flex flex-row blank postbox">
    <div class="d-flex flex-column col-4 col-md-3 col-lg-2 p-0 username postleftcolumn">
        <div class="credentials p-2">
            <div>
                {{ macros.avatar(otherMember.Username, 100, true) }}
                <br>
                {{ macros.profilelink(otherMember.Username) }}
            </div>
            <div class="d-flex flex-row">
                <div class="p-1"><i class="fa fa-2x fa-map-marker"></i></div>
                <div class="p-1 small"><strong>{{ message.sender.city.name }}<br>{{ message.sender.city.country.name }}</strong></div>
            </div>

            <div class="d-flex flex-row">
                <div class="p-1"><i class="m-l-1 fa fa-2x fa-comments-o"></i></div>
                <div class="p-1 small">{# TODO spoken languages #}</strong></div>
            </div>
        </div>
    </div>

    <div class="d-flex flex-column col-8 col-md-9 col-lg-10 p-2">
        <div>
            {{ message.Message | raw }}
        </div>
        <div class="mt-1 smaller">
            {{ 'Date' | trans }}:
                {{ message.created.diffForHumans }}
        </div>
        <div class="mt-3">
            <a class="btn btn-primary" href="{{ path( 'message_reply', { id: message.id } ) }}">{{ 'Reply' | trans }}</a>
        </div>
    </div>
</div>

{% endblock content %}
