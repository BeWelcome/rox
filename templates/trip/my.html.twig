{% extends 'trips.html.twig' %}

{% block title %}
    {{ 'trip.mytrips' | trans }}
{% endblock %}

{% block stylesheets %}
    {{ encore_entry_link_tags('tailwind') }}
{% endblock %}

{% block content %}
    <h1>{{ 'trip.mytrips' | trans }}</h1>
    {% if trips.nbResults != 0 %}
        {% set myself = app.user %}
        {% if trips.haveToPaginate %}
        <div class="row">
            <div class="col-12">
                <div class="pull-right">{{ pagerfanta( trips, 'rox_default', { routeName: 'mytrips' }) }}</div>
            </div>
        </div>
        {% endif %}

            {% for trip in trips %}
            <div class="row">
                <div class="col-12">
                    <h4><a href="{{ path('trip_show', { 'id': trip.id } ) }}">{{ trip.summary }}</a>
                        <div class="btn-group pull-right">
                            <a class="btn btn-sm btn-primary" href="{{ path('trip_remove', {'id': trip.id}) }}"><i class="far fa-trash-alt"></i></a>
                            <a class="btn btn-sm btn-primary" href="{{ path('trip_edit', {'id': trip.id}) }}"><i class="far fa-edit"></i></a>
                        </div>
                    </h4>
                    {{ trip.description | purify | truncate(200) }}
                </div>
                <div class="col-12 col-sm-4">
                    <p>{{ 'trip.count.of.travellers'|trans }} {{ trip.countOfTravellers }}</p>
                </div>
                <div class="col-12 col-sm-4">
                    <p>{{ 'trip.additional.info'|trans }} {{ trip.additionalInfo }}</p>
                </div>
                <div class="col-12 col-sm-4">
                    <p>{{ 'trip.legs'|trans }} {{ trip.subtrips|length }}</p>
                </div>
            </div>
            {% else %}
                <div class="col-12">{{ 'trip.no_trips_found'|trans }}</div>
            {% endfor %}

        {% if trips.haveToPaginate %}
        <div class="row">
            <div class="col-12">
                <div class="pull-right">{{ pagerfanta( trips, 'rox_default', { routeName: 'mytrips' }) }}</div>
            </div>
        </div>
        {% endif %}
    {% else %}
        {{ 'trip.no.trips'|trans }}
    {% endif %}
{% endblock content %}
